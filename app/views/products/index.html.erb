<% if @show_welcome_info %>
  <div id="welcome_msg" align="center">
    <%= render :partial => '/welcome_message' %>
  </div>
<%end%>

<% unless @err_msg.blank? %>
  <br/><br/>
  <div class="browse_search_err_msg" align="center">
    <h1><%= @err_msg %></h1>
  </div>
<%end%>

<%
  title = case @view_type
    when :myapps
      _("Listing my applications")
    when :approval
      _("Listing applications with status: %{status}") % {:status => approval_status(@approval_state)}
    when :index
      if @platform.present?
        _("Listing %{platform} applications") % {:platform => @platform.name}
      else
        _("Listing all applications")
      end
  end
%>

<% if @products.blank? %>
  <div class="browse_products">
    <h1><%= title %></h1>
    <div class="no_products_msg"><%= _("No applications available.") %></div>
  </div>
<% else %>
  <div class="browse_products">
    <h1><%= title %></h1>

	<ul id='product_selection_bar'>
	<li><%= link_to(_('Publication date'), products_path_with_params(:sort => 'created_at')) %></li>
	<li><%= link_to(_('Popularity'),       products_path_with_params(:sort => 'popularity')) %></li>
	<li><%= link_to(_('User rating'),      products_path_with_params(:sort => 'avg_rating')) %></li>
      	<% if @view_type == :index && @platform.blank? %>
       		<li><%= link_to(_('Featured apps'),  products_path_with_params(:sort => 'featured')) %></li>
	<% end %>

<div class="clear"></div>

    <%= render :partial=>'product', :collection => @products %>
  </div>

  <div class="browse_paginate">
    <%= will_paginate @products,
                      :previous_label => _('&#8592; Previous'),
                      :next_label     => _('Next &#8594;') %>
  </div>
<% end %>
