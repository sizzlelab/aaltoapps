<p id="notice"><%= notice %></p>
<p id="alert"><%= alert %></p>

<p>
  <b>Name:</b>
  <%= @product.name %>
</p>

<p>
  <b>Publisher:</b>
  <%= @product.publisher %>
</p>

<p>
  <b>Description:</b>
  <%= @product.description %>
</p>

<p>
  <b>Url:</b>
  <%= @product.url %>
</p>

<p>
  <% if @product.ratings.empty? %>
    not yet rated
  <% else %>
    <% avg = @product.ratings.average(:rating) %>
    <b>Ratings:</b>
    <p>
      average:
      <%= render :partial => 'ratings/rating', :object => avg %>
      (<%= avg.round(2) %>)
    </p>
    <ul>
      <% @product.ratings.each do |r| %>
        <li>
          <%= r.user.username %>:
          <%= render r %>
          (<%= r.rating.round(2) %>)
        </li>
      <% end %>
    </ul>
  <% end %>

  <%= render :partial => 'ratings/form', :object => @product %>
</p>

<p>
  <b>Comments:</b>
  <% @product.comments.each do |comment| %>
    <p>
      <b>Commenter: </b>
      <%= comment.commenter.username %>
    </p>
    <p>
      <b>Created at: </b>
      <%= comment.created_at %>
    </p>
    <p>
      <b>Comment: </b>
      <%= comment.body %>
    </p>
 <% end %>

</p>

<%= link_to 'Edit', edit_product_path(@product) %> |
<%= link_to 'Back', products_path %>
