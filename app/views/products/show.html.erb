<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @product.name %>
</p>

<p>
  <b>Publisher:</b>
  <%= @product.publisher %>
</p>

<p>
  <b>Description:</b>
  <%= @product.description %>
</p>

<p>
  <b>Url:</b>
  <%= @product.url %>
</p>

<p>
  <% if @product.ratings.empty? %>
    not yet rated
  <% else %>
    <b>Ratings:</b>
    <p>average: <%= @product.ratings.average(:rating) %></p>
    <ul>
      <% @product.ratings.each do |r| %>
        <li><%= r.user.username %>: <%= r.rating %></li>
      <% end %>
    </ul>
  <% end %>

  <%= form_for @product.ratings.build, :url => {
          :controller => 'ratings',
          :action => 'create',
        }, do |f| %>
    <%= f.label :rating %>
    <%= f.text_field :rating %>
    <br />
    <%= f.label :user_id %>
    <%= f.text_field :user_id %>
    <br />
    <%= f.submit %>
  <% end %>
</p>

<p>
  <b>Comments:</b>
  <% @product.comments.each do |comment| %>
    <p>
      <b>Commenter: </b>
      <%= comment.commenter.username %>
    </p>
    <p>
      <b>Created at: </b>
      <%= comment.created_at %>
    </p>
    <p>
      <b>Comment: </b>
      <%= comment.body %>
    </p>
 <% end %>

</p>

<%= link_to 'Edit', edit_product_path(@product) %> |
<%= link_to 'Back', products_path %>
